<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Showcase de Proyectos Técnicos 2025 - Versión Final</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400;700&family=Montserrat:wght@600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <style>
        :root { --primary-blue: #0052CC; --dark-text: #172B4D; --light-text: #6B778C; --background: #FFFFFF; }
        html { scroll-padding-top: 80px; }
        body { font-family: 'Lato', sans-serif; background-color: #F4F5F7; color: var(--dark-text); }
        .page { display: none; }
        .page.active { display: block; }
        header { background: rgba(255, 255, 255, 0.8); backdrop-filter: blur(10px); border-bottom: 1px solid #dfe1e6; }
        .section-title { font-family: 'Montserrat', sans-serif; font-size: 2.75rem; letter-spacing: -0.5px; color: var(--dark-text); }
        .section-subtitle { font-family: 'Lato', sans-serif; color: var(--light-text); max-width: 800px; margin-left: auto; margin-right: auto; }
        .card { background-color: var(--background); border: 1px solid #dfe1e6; border-radius: 12px; padding: 2rem; box-shadow: 0 4px 6px rgba(0, 0, 0, 0.04); transition: all 0.3s ease; }
        .card:hover { box-shadow: 0 10px 15px rgba(0, 0, 0, 0.07); transform: translateY(-4px); }
        body.presentation-mode { overflow: hidden; }
        .presentation-page body.presentation-mode .slide { display: none; height: calc(100vh - 128px); overflow-y: auto; padding-top: 2rem; padding-bottom: 2rem; opacity: 0; transition: opacity 0.5s ease-in-out; cursor: pointer;}
        .presentation-page body.presentation-mode .slide.active-slide { display: flex; align-items: center; opacity: 1; }
        .nav-item.active { color: var(--primary-blue); font-weight: 700; border-bottom: 2px solid var(--primary-blue); }
        
        /* --- Animation Styles --- */
        .anim-svg .movable, .anim-svg path { transition: all 0.5s ease-in-out; }
        .anim-svg .anim-text { opacity: 0; transition: opacity 0.4s ease-in-out; font-size: 9px; font-family: 'Lato', sans-serif; font-weight: bold; fill: #334155; }
        .anim-svg .anim-text.active { opacity: 1; }
        .envasadora-anim-svg #bottle-group { transition: transform 2s linear; }
        .envasadora-anim-svg #bottle-fill-level { transition: height 0.5s ease-out, transform 0.5s ease-out, opacity 0.2s; }

        .clickable-image { cursor: zoom-in; }
        #image-modal-backdrop { transition: opacity 0.3s ease; }
        #image-modal-content { transition: opacity 0.3s ease, transform 0.3s ease; }

        /* --- Gantt Chart Styles --- */
        .gantt-container { display: grid; grid-template-columns: 150px 1fr; gap: 5px; }
        .gantt-timeline { display: grid; grid-template-columns: repeat(5, 1fr); text-align: center; font-size: 0.75rem; color: #64748b; padding-bottom: 5px; border-bottom: 1px solid #e2e8f0; }
        .gantt-task-name { font-size: 0.8rem; white-space: nowrap; text-overflow: ellipsis; overflow: hidden; padding-right: 10px; }
        .gantt-bar-container { position: relative; height: 30px; }
        .gantt-bar { position: absolute; height: 20px; top: 5px; border-radius: 5px; opacity: 0.8; }
        .gantt-bar.completed { background-color: #22c55e; } /* green-500 */
        .gantt-bar.in-progress { background-color: #f59e0b; } /* amber-500 */
        .gantt-bar.pending { background-color: #ef4444; } /* red-500 */
        
        /* --- Simulator Styles --- */
        .custom-radio:checked+label { border-color: var(--primary-blue); background-color: #F4F8FF; box-shadow: 0 0 0 2px rgba(0, 82, 204, 0.2); }
    </style>
</head>

<body>
    <!-- PAGE 1: COVER -->
    <div id="page-cover" class="page active">
        <section class="bg-slate-50 min-h-screen flex flex-col justify-center">
            <div class="container mx-auto px-6 py-12 text-center">
                <div class="flex justify-center mb-6"><img src="https://13dejulio.edu.ar/wp-content/uploads/2022/03/Encabezado-web1.png" alt="Logo Instituto 13 de Julio" class="h-24"></div>
                <h1 class="text-4xl md:text-6xl font-extrabold text-slate-800" style="font-family: 'Montserrat', sans-serif;">SHOWCASE DE PROYECTOS TÉCNICOS</h1>
                <p class="text-lg md:text-xl font-light text-gray-600 max-w-4xl mx-auto my-4">Casos de Estudio en Automatización y Control Industrial del Instituto Técnico 13 de Julio.</p>
                <div class="grid md:grid-cols-3 gap-10 max-w-6xl mx-auto mt-10">
                    <button data-target="page-thermo" class="page-link bg-white p-8 rounded-lg border border-slate-200 shadow-sm hover:shadow-xl hover:border-blue-500 transition-all text-left group">
                        <i class="fas fa-cogs text-4xl text-blue-600 mb-4 group-hover:animate-spin" style="animation-duration: 3s;"></i>
                        <h3 class="text-2xl font-bold">Proyecto Termoformadora</h3>
                        <p class="mt-2 text-gray-600">Análisis, reconstrucción y puesta en marcha de una Célula de Termoformado industrial.</p>
                    </button>
                    <button data-target="page-envasadora" class="page-link bg-white p-8 rounded-lg border border-slate-200 shadow-sm hover:shadow-xl hover:border-blue-500 transition-all text-left group">
                        <i class="fas fa-box-open text-4xl text-blue-600 mb-4 group-hover:animate-bounce"></i>
                        <h3 class="text-2xl font-bold">Proyecto Línea de Envasado</h3>
                        <p class="mt-2 text-gray-600">Diseño, construcción y automatización de un sistema modular de envasado y taponado.</p>
                    </button>
                    <button data-target="page-conclusiones" class="page-link bg-blue-600 text-white p-8 rounded-lg border border-blue-700 shadow-sm hover:shadow-xl hover:bg-blue-700 transition-all flex flex-col items-center justify-center group">
                        <i class="fas fa-users text-4xl mb-2 group-hover:scale-110 transition-transform"></i>
                        <h3 class="text-2xl font-bold">Equipo y Conclusiones</h3>
                    </button>
                </div>
                 <div id="equipo-caratula" class="max-w-6xl mx-auto mt-12">
                    <h3 class="text-2xl font-bold text-gray-800 mb-6">Equipo de Proyecto</h3>
                    <div class="flex flex-wrap justify-center gap-x-8 gap-y-4 text-gray-700">
                        <!-- Team members injected here -->
                    </div>
                </div>
                 <div class="mt-12 text-sm text-gray-500 border-t pt-4 max-w-md mx-auto">
                    <p><strong>Materia:</strong> Máquinas, Equipos y Accionamientos</p>
                    <p><strong>Docente:</strong> Agustín Barriga | <strong>Curso:</strong> 6° ATT</p>
                </div>
            </div>
        </section>
    </div>

    <!-- PAGE 2: TERMOFORMADORA -->
    <div id="page-thermo" class="page presentation-page">
        <header class="sticky top-0 z-50">
           <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
                 <div class="flex items-center space-x-4">
                    <button data-target="page-cover" class="page-link p-2 text-gray-600 hover:text-blue-600" title="Volver al inicio"><i class="fas fa-home"></i></button>
                    <h1 class="text-xl font-bold" style="font-family: 'Montserrat', sans-serif;">PROYECTO TERMOFORMADORA</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="presentation-mode-btn p-2 text-gray-600 hover:text-blue-600" title="Modo Presentación"><i class="play-icon fas fa-play"></i><i class="stop-icon fas fa-stop hidden"></i></button>
                    <button class="fullscreen-btn p-2 text-gray-600 hover:text-blue-600" title="Pantalla Completa"><i class="fas fa-expand"></i></button>
                </div>
            </nav>
            <div class="presentation-nav-container hidden">
                <div class="presentation-progress-bar w-0 h-1 bg-blue-600 transition-all duration-300"></div>
                <div class="presentation-nav-tree container mx-auto px-6 py-2 flex justify-center items-center text-xs text-gray-500 gap-x-6"></div>
            </div>
        </header>
        <main>
            <section data-title="Intro" class="slide">
                <div class="container mx-auto px-6">
                    <div class="text-center"><h2 class="section-title">Reconstrucción de Termoformadora</h2><p class="section-subtitle mt-4">Este proyecto documenta la ingeniería inversa, reparación, automatización y análisis de viabilidad de una termoformadora industrial para su puesta en producción.</p></div>
                    <div class="card grid lg:grid-cols-5 gap-8 mt-12">
                        <div class="lg:col-span-3">
                            <h3 class="font-bold text-2xl mb-6 text-blue-600">Pilares del Proyecto</h3>
                            <div class="space-y-6">
                                <div class="flex items-start gap-4"><i class="fas fa-wrench text-blue-600 text-2xl mt-1 w-8 text-center"></i><div><h4 class="font-semibold">Ingeniería Inversa y Reconstrucción</h4><p class="text-gray-600 text-sm">Se relevó y documentó la máquina sin planos originales para identificar fallas, proponer mejoras y ejecutar una reparación integral.</p></div></div>
                                <div class="flex items-start gap-4"><i class="fas fa-robot text-blue-600 text-2xl mt-1 w-8 text-center"></i><div><h4 class="font-semibold">Automatización y Control</h4><p class="text-gray-600 text-sm">Se implementó un sistema de control con un PLC Kinco K3, programando la lógica para un ciclo de operación automático, seguro y eficiente.</p></div></div>
                                <div class="flex items-start gap-4"><i class="fas fa-chart-pie text-blue-600 text-2xl mt-1 w-8 text-center"></i><div><h4 class="font-semibold">Análisis de Viabilidad</h4><p class="text-gray-600 text-sm">Se elaboró un modelo de negocio con costos de mercado (Octubre 2025, ARS), proyectando la rentabilidad para validar su potencial comercial.</p></div></div>
                            </div>
                        </div>
                        <div class="lg:col-span-2 bg-slate-50 p-6 rounded-lg border border-slate-200 text-center">
                             <h3 class="font-bold text-2xl mb-6 text-blue-600">Indicadores Clave</h2>
                             <div class="space-y-4">
                                <div><p class="text-sm text-gray-500">PRODUCCIÓN ANUAL (12HS)</p><p class="text-3xl font-bold">+735.000</p></div>
                                <div><p class="text-sm text-gray-500">RECUPERO DE INVERSIÓN (ROI)</p><p class="text-3xl font-bold">~4 Meses</p></div>
                                <div><p class="text-sm text-gray-500">GANANCIA NETA ANUAL</p><p class="text-3xl font-bold text-green-600">~$13.3M ARS</p></div>
                             </div>
                        </div>
                    </div>
                </div>
            </section>
            <section data-title="Proceso" class="slide">
                 <div class="container mx-auto px-6">
                    <div class="text-center"><h2 class="section-title">El Proceso de Termoformado</h2><p class="section-subtitle mt-4">El sistema transforma una lámina plástica en un producto tridimensional a través de un ciclo automatizado de 5 etapas clave.</p></div>
                    <div class="card grid grid-cols-2 md:grid-cols-5 gap-4 text-center mt-12">
                        <div class="p-4"><i class="fas fa-thermometer-half text-5xl text-blue-600 mb-3"></i><h4 class="font-bold">1. Calentamiento</h4><p class="text-sm text-gray-600">Resistencias eléctricas calientan la lámina (120°C-220°C) hasta que se vuelve maleable.</p></div>
                        <div class="p-4"><i class="fas fa-object-group text-5xl text-blue-600 mb-3"></i><h4 class="font-bold">2. Moldeado</h4><p class="text-sm text-gray-600">Se aplica vacío para que la lámina se adapte a la forma del molde con alta precisión.</p></div>
                        <div class="p-4"><i class="fas fa-snowflake text-5xl text-blue-600 mb-3"></i><h4 class="font-bold">3. Enfriamiento</h4><p class="text-sm text-gray-600">Un motoventilador enfría la pieza para que se solidifique y conserve su nueva forma.</p></div>
                        <div class="p-4"><i class="fas fa-cut text-5xl text-blue-600 mb-3"></i><h4 class="font-bold">4. Recorte</h4><p class="text-sm text-gray-600">Se recortan los bordes y el material sobrante para obtener el producto final.</p></div>
                        <div class="p-4"><i class="fas fa-layer-group text-5xl text-blue-600 mb-3"></i><h4 class="font-bold">5. Apilado</h4><p class="text-sm text-gray-600">Las piezas terminadas se apilan, listas para su empaque o siguiente etapa de ensamblaje.</p></div>
                    </div>
                </div>
            </section>
            <section data-title="Análisis Técnico" class="slide">
                 <div class="container mx-auto px-6">
                    <div class="text-center"><h2 class="section-title">Análisis Funcional y Animación</h2><p class="section-subtitle mt-4">Una vista detallada de la ingeniería de la máquina y una simulación animada de su funcionamiento, explicando cada paso del ciclo.</p></div>
                    <div class="card grid lg:grid-cols-2 gap-8 items-center mt-12">
                        <div>
                            <h3 class="text-xl font-bold mb-4">Componentes de Control Relevados</h3>
                             <ul class="space-y-3 text-sm">
                                <li class="flex items-start gap-3"><i class="fas fa-microchip text-blue-500 w-5 text-center mt-1"></i><div><strong>PLC:</strong> Kinco K3 CPU304EX, con 14 Entradas Digitales (Sink/Source) y 10 Salidas a Relé.</div></li>
                                <li class="flex items-start gap-3"><i class="fas fa-desktop text-blue-500 w-5 text-center mt-1"></i><div><strong>HMI:</strong> Array SH-300 para la interfaz de operación, configuración de parámetros y monitoreo del proceso.</div></li>
                                <li class="flex items-start gap-3"><i class="fas fa-toggle-on text-blue-500 w-5 text-center mt-1"></i><div><strong>Actuadores de Potencia:</strong> 6 Relés de Estado Sólido para control PWM de resistencias y 3 Contactores para arranque de motores.</div></li>
                                <li class="flex items-start gap-3"><i class="fas fa-cogs text-blue-500 w-5 text-center mt-1"></i><div><strong>Motores Trifásicos:</strong> Motor Eberle (0.37kW) para bomba de vacío y motor Leroy-Somer (0.55kW) para ventilador de enfriamiento.</div></li>
                            </ul>
                        </div>
                        <div class="text-center">
                            <h3 class="text-xl font-bold mb-4">Animación del Ciclo</h3>
                            <svg class="thermo-anim-svg anim-svg w-full border rounded-lg p-4 bg-slate-50" viewBox="0 0 300 200">
                                <!-- Estructura -->
                                <rect x="20" y="100" width="260" height="10" fill="#94a3b8"/><rect x="20" y="110" width="10" height="70" fill="#94a3b8"/><rect x="270" y="110" width="10" height="70" fill="#94a3b8"/>
                                <!-- Componentes Móviles -->
                                <path id="mold" d="M 100 100 L 120 80 L 180 80 L 200 100 Z" fill="#cbd5e1" class="movable"/>
                                <path id="lamina-path" d="M 70 60 L 230 60 L 230 60 L 70 60 Z" fill="#3b82f6" class="movable"/>
                                <g id="calentador" class="movable"><rect x="80" y="10" width="140" height="20" fill="#f87171" rx="5"/><rect x="90" y="15" width="120" height="2" fill="white"/><rect x="90" y="21" width="120" height="2" fill="white"/></g>
                                <!-- Textos de Animación -->
                                <text x="150" y="50" text-anchor="middle" class="anim-text" id="text-calentar">1. Calentando lámina...</text>
                                <text x="150" y="75" text-anchor="middle" class="anim-text" id="text-moldear">2. Moldeando por vacío...</text>
                                <text x="150" y="50" text-anchor="middle" class="anim-text" id="text-enfriar">3. Enfriando pieza...</text>
                                <text x="150" y="40" text-anchor="middle" class="anim-text" id="text-expulsar">4. Expulsando pieza</text>
                            </svg>
                            <div class="mt-4 flex justify-center space-x-2"><button id="anim-start-thermo" class="text-sm bg-blue-600 text-white px-4 py-2 rounded-lg">Iniciar</button><button id="anim-reset-thermo" class="text-sm bg-gray-200 px-4 py-2 rounded-lg">Reiniciar</button></div>
                        </div>
                    </div>
                </div>
            </section>
            <section data-title="Diagnóstico" class="slide">
                 <div class="container mx-auto px-6">
                    <div class="text-center"><h2 class="section-title">Diagnóstico y Plan de Acción</h2><p class="section-subtitle mt-4">Listado de componentes relevados que requieren reparación o reemplazo para la puesta en marcha segura y funcional de la máquina.</p></div>
                    <div class="card grid lg:grid-cols-2 gap-8 mt-12">
                        <div>
                            <h3 class="text-xl font-bold mb-4 text-red-600"><i class="fas fa-exclamation-triangle mr-2"></i>Componentes Dañados</h3>
                            <ul class="list-disc list-inside space-y-2 text-gray-700">
                                <li><strong>Resistencia eléctrica:</strong> Una resistencia fue removida por daño. Afecta la uniformidad del calentamiento. <strong>Acción: Reemplazar.</strong></li>
                                <li><strong>Parrilla de molde:</strong> Rosca de sujeción barrida. Impide un ajuste firme del molde. <strong>Acción: Rehacer rosca y colocar tornillo.</strong></li>
                                <li><strong>Burletes de sujeción:</strong> El burlete inferior está roto, causando fugas de vacío. <strong>Acción: Reemplazar (~150 cm).</strong></li>
                                <li><strong>Conectores Racor:</strong> Conectores neumáticos para mangueras de 5/16 están dañados. <strong>Acción: Reemplazar.</strong></li>
                            </ul>
                        </div>
                         <div class="bg-slate-50 p-6 rounded-lg border border-slate-200">
                            <h3 class="text-xl font-bold mb-4 text-orange-500"><i class="fas fa-puzzle-piece mr-2"></i>Componentes Faltantes</h3>
                             <ul class="list-disc list-inside space-y-2 text-gray-700">
                                <li><strong>Bujes:</strong> Ausentes en ejes de movimiento, causando fricción y desgaste. <strong>Acción: Instalar bujes adecuados.</strong></li>
                                <li><strong>Tornillos de ajuste:</strong> Faltan tornillos para fijar la plancha base del molde. <strong>Acción: Colocar tornillería faltante.</strong></li>
                                <li><strong>Pintura Alta Temperatura:</strong> La estructura carece de protección térmica. <strong>Acción: Aplicar esmalte para 300°C.</strong></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
            <section data-title="Planificación" class="slide">
                <div class="container mx-auto px-6">
                    <div class="text-center"><h2 class="section-title">Planificación y Gantt</h2><p class="section-subtitle mt-4">Diagrama de Gantt estimado para el proyecto de reconstrucción, desde el análisis inicial hasta la puesta en marcha.</p></div>
                    <div id="gantt-thermo" class="card mt-12">
                        <!-- Gantt chart for Thermoformer will be injected here by JS -->
                    </div>
                </div>
            </section>
            <section data-title="Evidencia" class="slide">
                 <div class="container mx-auto px-6 h-full flex flex-col">
                    <div class="text-center w-full"><h2 class="section-title">Evidencia del Proceso</h2><p class="section-subtitle mt-4">Un recorrido visual por el trabajo de relevamiento, reconstrucción y cableado del tablero de control.</p></div>
                    <div class="card grid grid-cols-2 md:grid-cols-4 gap-4 mt-12 flex-grow">
                        <figure class="flex flex-col"><h4 class="font-semibold text-center mb-2 text-sm">Máquina Original</h4><img src="https://i.postimg.cc/fy2wJJvk/IMG-20250917-WA0026-1.jpg" class="w-full flex-grow h-48 object-cover rounded-lg shadow-md clickable-image"></figure>
                        <figure class="flex flex-col"><h4 class="font-semibold text-center mb-2 text-sm">Tablero de Control</h4><img src="hhttps://i.postimg.cc/tJCqqhFx/IMG-20251001-WA0029.jpg" class="w-full flex-grow h-48 object-cover rounded-lg shadow-md clickable-image"></figure>
                        <figure class="flex flex-col"><h4 class="font-semibold text-center mb-2 text-sm">Resistencias</h4><img src="https://i.postimg.cc/KjqZRR5r/IMG-20251015-WA0030.jpg" class="w-full flex-grow h-48 object-cover rounded-lg shadow-md clickable-image"></figure>
                        <figure class="flex flex-col"><h4 class="font-semibold text-center mb-2 text-sm">Componentes Neumáticos</h4><img src="https://i.postimg.cc/yxY11F00/IMG-20250901-WA0279.jpg" class="w-full flex-grow h-48 object-cover rounded-lg shadow-md clickable-image"></figure>
                    </div>
                </div>
            </section>
            <section data-title="Simulador" class="slide">
                <div class="container mx-auto px-6">
                    <div class="card">
                        <div class="text-center"><h2 class="section-title">Simulador de Producción</h2><p class="section-subtitle mt-4">Seleccione un producto para visualizar el ciclo y su desglose económico.</p></div>
                        <div class="grid lg:grid-cols-2 gap-12 items-start mt-12">
                            <div>
                                <h3 class="font-bold text-xl mb-6">1. Seleccione Producto:</h3>
                                <div class="space-y-4">
                                    <input type="radio" name="product" id="prod1" value="bandeja" class="hidden custom-radio" checked><label for="prod1" class="flex items-center p-4 border-2 border-slate-200 rounded-lg cursor-pointer"><img src="https://acdn-us.mitiendanube.com/stores/002/955/098/products/bandeja-371-640-0-cad03da57e4ecbcfe816800876412099-1024-1024.jpg" class="w-16 h-16 object-contain"><div class="ml-4"><h5 class="font-bold text-lg">Bandeja Gastronómica</h5></div></label>
                                    <input type="radio" name="product" id="prod2" value="mascara" class="hidden custom-radio"><label for="prod2" class="flex items-center p-4 border-2 border-slate-200 rounded-lg cursor-pointer"><img src="https://http2.mlstatic.com/D_Q_NP_874796-MLA90547858442_082025-O.webp" class="w-16 h-16 object-contain"><div class="ml-4"><h5 class="font-bold text-lg">Máscara de Cotillón</h5></div></label>
                                    <input type="radio" name="product" id="prod3" value="blister" class="hidden custom-radio"><label for="prod3" class="flex items-center p-4 border-2 border-slate-200 rounded-lg cursor-pointer"><img src="https://www.arapack.com/wp-content/uploads/2018/07/arapack-blister-autocierre-e1531559368209-768x282.jpg" class="w-16 h-16 object-contain"><div class="ml-4"><h5 class="font-bold text-lg">Blíster Industrial</h5></div></label>
                                </div>
                                <button id="start-simulation-btn" class="mt-8 w-full bg-blue-600 text-white font-bold py-4 rounded-lg hover:bg-blue-700 transition">Activar Ciclo</button>
                            </div>
                            <div>
                                <h3 class="font-bold text-xl mb-6">2. Resultado del Ciclo:</h3>
                                <div id="simulation-result" class="bg-slate-50 border border-slate-200 p-6 rounded-lg min-h-[300px] flex justify-center items-center text-center"><p class="text-gray-500">Esperando ciclo...</p></div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <section data-title="Viabilidad" class="slide">
                 <div class="container mx-auto px-6">
                    <div class="text-center"><h2 class="section-title">Análisis de Viabilidad Económica</h2><p class="section-subtitle mt-4">Proyección financiera basada en costos de mercado actualizados a Octubre de 2025 en Argentina.</p></div>
                    <div class="grid lg:grid-cols-3 gap-8 mt-12">
                        <div class="card"><h3 class="text-2xl font-bold mb-6">Costos</h3><div class="space-y-3 text-gray-600"><p>Inversión Inicial (CAPEX): <span class="font-bold text-gray-800 float-right">$ 3.1M</span></p><p>Costo Op. Mensual (OPEX): <span class="font-bold text-gray-800 float-right">$ 4.1M</span></p></div></div>
                        <div class="card"><h3 class="text-2xl font-bold mb-6">Ganancias Proyectadas</h3><div class="space-y-3 text-gray-600"><p>Ingresos Brutos Mensuales: <span class="font-bold text-gray-800 float-right">$ 5.21M</span></p><p>Ganancia Neta Mensual: <span class="font-bold text-green-600 float-right">$ 1.08M</span></p><p>Ganancia Neta Anual: <span class="font-bold text-green-600 float-right">~$13M</span></p></div></div>
                        <div class="card"><h3 class="text-2xl font-bold mb-6">Métricas de Rentabilidad</h3><div class="space-y-4 text-center"><p class="text-gray-600">Recupero de Inversión (ROI)</p><p class="text-4xl font-bold">~3.8 Meses</p><hr class="my-2"><p class="text-gray-600">Punto de Equilibrio</p><p class="text-4xl font-bold">~35.000 <span class="text-lg font-normal">unid/mes</span></p></div></div>
                    </div>
                </div>
            </section>
        </main>
        <div class="presentation-arrows hidden">
             <button class="prev-slide-btn fixed left-4 top-1/2 -translate-y-1/2 z-50 p-3 bg-white/70 backdrop-blur-sm border rounded-full shadow-lg hover:bg-white disabled:opacity-30"><i class="fas fa-chevron-left text-xl"></i></button>
             <button class="next-slide-btn fixed right-4 top-1/2 -translate-y-1/2 z-50 p-3 bg-white/70 backdrop-blur-sm border rounded-full shadow-lg hover:bg-white"><i class="fas fa-chevron-right text-xl"></i></button>
        </div>
    </div>
    
    <!-- PAGE 3: ENVASADORA -->
    <div id="page-envasadora" class="page presentation-page">
        <header class="sticky top-0 z-50">
           <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <button data-target="page-cover" class="page-link p-2 text-gray-600 hover:text-blue-600" title="Volver al inicio"><i class="fas fa-home"></i></button>
                    <h1 class="text-xl font-bold" style="font-family: 'Montserrat', sans-serif;">PROYECTO LÍNEA DE ENVASADO</h1>
                </div>
                <div class="flex items-center space-x-4">
                    <button class="presentation-mode-btn p-2 text-gray-600 hover:text-blue-600" title="Modo Presentación"><i class="play-icon fas fa-play"></i><i class="stop-icon fas fa-stop hidden"></i></button>
                    <button class="fullscreen-btn p-2 text-gray-600 hover:text-blue-600" title="Pantalla Completa"><i class="fas fa-expand"></i></button>
                </div>
            </nav>
            <div class="presentation-nav-container hidden">
                <div class="presentation-progress-bar w-0 h-1 bg-blue-600 transition-all duration-300"></div>
                <div class="presentation-nav-tree container mx-auto px-6 py-2 flex justify-center items-center text-xs text-gray-500 gap-x-6"></div>
            </div>
        </header>
        <main>
             <section data-title="Intro" class="slide">
                <div class="container mx-auto px-6">
                    <div class="text-center"><h2 class="section-title">Línea de Envasado Automatizada</h2><p class="section-subtitle mt-4">Este proyecto abarca el diseño, la construcción y la automatización de un prototipo de línea de envasado modular para producciones de pequeña y mediana escala.</p></div>
                    <div class="card grid lg:grid-cols-2 gap-8 items-center mt-12">
                        <div>
                            <h3 class="font-bold text-2xl mb-6 text-blue-600">Objetivos del Proyecto</h3>
                            <ul class="space-y-4">
                                <li class="flex items-start gap-3"><i class="fas fa-check-circle text-green-500 mt-1"></i><span>Construir una cinta transportadora funcional como base del sistema.</span></li>
                                <li class="flex items-start gap-3"><i class="fas fa-cogs text-blue-500 mt-1"></i><span>Diseñar e integrar tres módulos secuenciales: Llenado, Colocación de Tapa y Cierre Hermético.</span></li>
                                <li class="flex items-start gap-3"><i class="fas fa-robot text-blue-500 mt-1"></i><span>Desarrollar un sistema de control con PLC para automatizar la secuencia completa, optimizando tiempos y asegurando repetitibilidad.</span></li>
                            </ul>
                        </div>
                        <img src="https://i.postimg.cc/vxnRK8kD/IMG-20250823-WA0086.jpg" class="rounded-lg shadow-md w-full h-80 object-cover clickable-image">
                    </div>
                </div>
            </section>
            <section data-title="Proceso" class="slide">
                 <div class="container mx-auto px-6">
                    <div class="text-center"><h2 class="section-title">El Proceso de Envasado</h2><p class="section-subtitle mt-4">El sistema automatiza el envasado de productos en un ciclo de 3 módulos sincronizados por un PLC.</p></div>
                    <div class="card grid md:grid-cols-3 gap-8 mt-12">
                        <div class="text-center">
                            <i class="fas fa-fill-drip text-5xl text-blue-600 mb-4"></i>
                            <h4 class="font-bold text-xl mb-2">1. Módulo de Llenado</h4>
                            <p class="text-sm text-gray-600">Una tolva de almacenamiento dosifica el producto. Un cilindro neumático controla una compuerta, regulando el volumen de llenado por tiempo para asegurar precisión.</p>
                        </div>
                        <div class="text-center">
                            <i class="fas fa-sign-in-alt text-5xl text-blue-600 mb-4" style="transform: rotate(90deg);"></i>
                            <h4 class="font-bold text-xl mb-2">2. Módulo de Taponado</h4>
                            <p class="text-sm text-gray-600">Un dispensador mecánico alimenta las tapas. La botella, al avanzar, arrastra una tapa por rozamiento, posicionándola correctamente sobre el cuello.</p>
                        </div>
                        <div class="text-center">
                            <i class="fas fa-tools text-5xl text-blue-600 mb-4"></i>
                            <h4 class="font-bold text-xl mb-2">3. Módulo de Cierre</h4>
                            <p class="text-sm text-gray-600">Un destornillador neumático, montado en un cilindro de doble efecto, baja, se acopla a la tapa y realiza el apriete para un cierre hermético y uniforme.</p>
                        </div>
                    </div>
                 </div>
            </section>
            <section data-title="Análisis Técnico" class="slide">
                 <div class="container mx-auto px-6">
                    <div class="text-center"><h2 class="section-title">Análisis Funcional y Animación</h2><p class="section-subtitle mt-4">Desglose de la ingeniería de la línea de envasado y una simulación animada de su operación secuencial.</p></div>
                    <div class="card grid lg:grid-cols-2 gap-8 items-center mt-12">
                         <div class="space-y-4">
                            <h3 class="text-xl font-bold mb-4">Secuencia de Actuadores (Salidas PLC)</h3>
                            <div><h4 class="font-semibold"><i class="fas fa-ruler-horizontal text-blue-500 mr-2"></i>Transporte y Posicionamiento</h4><p class="text-sm text-gray-600"><strong>Q1:</strong> Motor de cinta. <strong>Q2, Q3, Q5:</strong> Cilindros neumáticos de parada para posicionar la botella en cada estación.</p></div>
                            <div><h4 class="font-semibold"><i class="fas fa-fill-drip text-blue-500 mr-2"></i>Llenado</h4><p class="text-sm text-gray-600"><strong>Q4:</strong> Cilindro de la tolva. Se activa por un tiempo predefinido para dosificar el producto.</p></div>
                            <div><h4 class="font-semibold"><i class="fas fa-toolbox text-blue-500 mr-2"></i>Cierre Hermético</h4><p class="text-sm text-gray-600"><strong>Q6:</strong> Cilindro vertical del atornillador. <strong>Q7:</strong> Atornillador neumático que realiza el apriete final de la tapa.</p></div>
                        </div>
                        <div class="text-center">
                             <h3 class="text-xl font-bold mb-4">Animación del Proceso</h3>
                             <svg class="envasadora-anim-svg anim-svg w-full border rounded-lg p-4 bg-slate-50" viewBox="0 0 400 150">
                                <!-- Estructura -->
                                <rect x="10" y="100" width="380" height="15" fill="#a1a1aa"/>
                                <g id="fill-station"><path d="M 110 30 L 140 30 L 135 15 L 115 15 Z" fill="#9ca3af"/><rect x="115" y="30" width="20" height="40" fill="#9ca3af"/><rect id="hopper-gate" class="movable" x="120" y="70" width="10" height="10" fill="#a1a1aa"/></g>
                                <g id="cap-station"><rect id="screwdriver" class="movable" x="245" y="0" width="10" height="30" fill="#4b5563"/><path d="M 235 40 L 265 40 L 265 30 L 235 30 Z" fill="#9ca3af"/></g>
                                <g id="bottle-group">
                                    <path d="M 0 0 L 0 -40 Q 0 -50 5 -50 L 15 -50 Q 20 -50 20 -40 L 20 0 Z" fill="#bfdbfe" transform="translate(15,100)"/>
                                    <rect id="bottle-fill-level" x="17" y="70" width="16" height="0" fill="#60a5fa" opacity="0"/>
                                    <rect id="bottle-cap" class="movable" x="17.5" y="45" width="15" height="5" fill="#6b7280" opacity="0"/>
                                </g>
                                <rect id="stopper1" class="movable" x="100" y="85" width="5" height="15" fill="#ef4444"/>
                                <rect id="stopper2" class="movable" x="230" y="85" width="5" height="15" fill="#ef4444"/>
                                <!-- Textos Animación -->
                                <text x="125" y="10" text-anchor="middle" class="anim-text" id="text-llenado">1. Llenando...</text>
                                <text x="250" y="10" text-anchor="middle" class="anim-text" id="text-taponado">2. Taponando...</text>
                                <text x="320" y="80" text-anchor="middle" class="anim-text" id="text-salida">3. Salida</text>
                             </svg>
                             <div class="mt-4 flex justify-center space-x-2"><button id="anim-start-envasadora" class="text-sm bg-blue-600 text-white px-4 py-2 rounded-lg">Iniciar</button><button id="anim-reset-envasadora" class="text-sm bg-gray-200 px-4 py-2 rounded-lg">Reiniciar</button></div>
                        </div>
                    </div>
                </div>
            </section>
             <section data-title="Planificación" class="slide">
                <div class="container mx-auto px-6">
                    <div class="text-center"><h2 class="section-title">Planificación y Gantt</h2><p class="section-subtitle mt-4">Diagrama de Gantt del proyecto de construcción de la línea de envasado, mostrando la secuencia y duración de cada tarea.</p></div>
                    <div id="gantt-envasadora" class="card mt-12">
                        <!-- Gantt chart for Envasadora will be injected here by JS -->
                    </div>
                </div>
            </section>
             <section data-title="Viabilidad" class="slide">
                <div class="container mx-auto px-6">
                    <div class="text-center"><h2 class="section-title">Análisis de Costos del Prototipo</h2><p class="section-subtitle mt-4">Desglose de la inversión en materiales y componentes para la construcción de la línea de envasado (Cifras en ARS).</p></div>
                    <div class="card mt-12 max-w-4xl mx-auto">
                        <h3 class="text-2xl font-bold mb-6 text-center">Presupuesto de Componentes</h3>
                        <div class="overflow-x-auto">
                            <table class="w-full text-sm text-left text-gray-500">
                                <thead class="text-xs text-gray-700 uppercase bg-gray-50">
                                    <tr>
                                        <th scope="col" class="px-6 py-3">Material</th>
                                        <th scope="col" class="px-6 py-3">Cantidad</th>
                                        <th scope="col" class="px-6 py-3 text-right">Costo Unitario</th>
                                        <th scope="col" class="px-6 py-3 text-right">Costo Total</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="bg-white border-b"><td class="px-6 py-4 font-medium">Banda modular plástica</td><td class="px-6 py-4">1</td><td class="px-6 py-4 text-right">$180,000</td><td class="px-6 py-4 text-right">$180,000</td></tr>
                                    <tr class="bg-gray-50 border-b"><td class="px-6 py-4 font-medium">Motor 12V CC</td><td class="px-6 py-4">1</td><td class="px-6 py-4 text-right">$100,000</td><td class="px-6 py-4 text-right">$100,000</td></tr>
                                    <tr class="bg-white border-b"><td class="px-6 py-4 font-medium">Guías laterales ajustables</td><td class="px-6 py-4">2</td><td class="px-6 py-4 text-right">$20,500</td><td class="px-6 py-4 text-right">$41,000</td></tr>
                                    <tr class="bg-gray-50 border-b"><td class="px-6 py-4 font-medium">Cilindro neumático MD8</td><td class="px-6 py-4">3</td><td class="px-6 py-4 text-right">$11,712</td><td class="px-6 py-4 text-right">$35,136</td></tr>
                                    <tr class="bg-white border-b"><td class="px-6 py-4 font-medium">Bastidores de aluminio</td><td class="px-6 py-4">1</td><td class="px-6 py-4 text-right">$35,000</td><td class="px-6 py-4 text-right">$35,000</td></tr>
                                    <tr class="bg-gray-50 border-b"><td class="px-6 py-4 font-medium">Perilla de ajuste manual</td><td class="px-6 py-4">4</td><td class="px-6 py-4 text-right">$7,100</td><td class="px-6 py-4 text-right">$28,400</td></tr>
                                    <tr class="bg-white border-b"><td class="px-6 py-4 font-medium">Cojinete montado</td><td class="px-6 py-4">2</td><td class="px-6 py-4 text-right">$12,000</td><td class="px-6 py-4 text-right">$24,000</td></tr>
                                    <tr class="bg-gray-50 border-b"><td class="px-6 py-4 font-medium">Accesorios Racor</td><td class="px-6 py-4">6</td><td class="px-6 py-4 text-right">$2,500</td><td class="px-6 py-4 text-right">$15,000</td></tr>
                                </tbody>
                                <tfoot>
                                    <tr class="font-semibold text-gray-900">
                                        <th scope="row" colspan="3" class="px-6 py-3 text-base text-right">Total Inversión Prototipo</th>
                                        <td class="px-6 py-3 text-base text-right">$458,536</td>
                                    </tr>
                                </tfoot>
                            </table>
                        </div>
                    </div>
                </div>
            </section>
             <section data-title="Evidencia" class="slide">
                <div class="container mx-auto px-6 h-full flex flex-col">
                    <div class="text-center w-full"><h2 class="section-title">Evidencia del Proceso</h2><p class="section-subtitle mt-4">Imágenes del ensamblaje de la cinta transportadora y los componentes mecánicos.</p></div>
                    <div class="card grid grid-cols-2 md:grid-cols-3 gap-4 mt-12 flex-grow">
                        <figure class="flex flex-col"><h4 class="font-semibold text-center mb-2 text-sm">Montaje de Cinta</h4><img src="https://i.postimg.cc/sx6VvvJJ/IMG-20251015-WA0029.jpg" class="w-full flex-grow h-48 object-cover rounded-lg shadow-md clickable-image"></figure>
                        <figure class="flex flex-col"><h4 class="font-semibold text-center mb-2 text-sm">Trabajo en Equipo</h4><img src="https://i.postimg.cc/3NJ88g2W/IMG-20251015-WA0025.jpg" class="w-full flex-grow h-48 object-cover rounded-lg shadow-md clickable-image"></figure>
                        <figure class="flex flex-col"><h4 class="font-semibold text-center mb-2 text-sm">Ajuste de Mecanismos</h4><img src="https://i.postimg.cc/yxY11F00/IMG-20250901-WA0279.jpg" class="w-full flex-grow h-48 object-cover rounded-lg shadow-md clickable-image"></figure>
                        <figure class="flex flex-col col-span-2 md:col-span-3">
                            <h4 class="font-semibold text-center mb-2 text-sm">Vista General (Video)</h4>
                            <iframe 
                                src="https://streamable.com/e/kwwilr" 
                                frameborder="0" 
                                width="100%" 
                                height="100%" 
                                allowfullscreen 
                                class="w-full flex-grow h-64 rounded-lg shadow-md">
                            </iframe>
                        </figure>
                    </div>
                </div>
            </section>
        </main>
        <div class="presentation-arrows hidden">
             <button class="prev-slide-btn fixed left-4 top-1/2 -translate-y-1/2 z-50 p-3 bg-white/70 backdrop-blur-sm border rounded-full shadow-lg hover:bg-white disabled:opacity-30"><i class="fas fa-chevron-left text-xl"></i></button>
             <button class="next-slide-btn fixed right-4 top-1/2 -translate-y-1/2 z-50 p-3 bg-white/70 backdrop-blur-sm border rounded-full shadow-lg hover:bg-white"><i class="fas fa-chevron-right text-xl"></i></button>
        </div>
    </div>

    <!-- PAGE 4: CONCLUSIONES -->
    <div id="page-conclusiones" class="page">
        <header class="sticky top-0 z-50">
           <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
                <div class="flex items-center space-x-4">
                    <button data-target="page-cover" class="page-link p-2 text-gray-600 hover:text-blue-600" title="Volver al inicio"><i class="fas fa-home"></i></button>
                    <h1 class="text-xl font-bold" style="font-family: 'Montserrat', sans-serif;">CONCLUSIONES Y EQUIPO</h1>
                </div>
            </nav>
        </header>
         <main>
            <section class="container mx-auto px-6 py-12">
                <div class="text-center max-w-4xl mx-auto mb-12">
                    <h2 class="section-title">Conclusiones Finales</h2>
                    <p class="section-subtitle mt-4">La culminación exitosa de estos proyectos, desde la ingeniería inversa hasta la automatización funcional, es un testimonio de nuestra capacidad técnica, resolución de problemas y trabajo en equipo. Agradecemos profundamente la guía de nuestros profesores y el apoyo del instituto, cuyos recursos fueron fundamentales para transformar estos desafíos en valiosas experiencias de aprendizaje. Hemos demostrado la habilidad para aplicar conocimientos teóricos a problemas industriales reales, y estamos preparados para afrontar futuros desafíos con la misma dedicación y profesionalismo.</p>
                </div>
                <div class="card">
                    <h3 class="text-2xl font-bold text-center mb-8">Equipo de Proyecto</h3>
                    <div id="team-container-final" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- Final team cards will be injected here -->
                    </div>
                </div>
            </section>
        </main>
    </div>

    <div id="image-modal-backdrop" class="fixed inset-0 bg-black/70 z-[60] hidden opacity-0 flex items-center justify-center p-4">
        <div id="image-modal-content" class="bg-white rounded-lg p-2 max-w-4xl max-h-[90vh] w-auto relative scale-95 opacity-0">
            <button id="image-modal-close" class="absolute -top-4 -right-4 bg-white rounded-full h-10 w-10 text-2xl flex items-center justify-center text-gray-700 shadow-lg">&times;</button>
            <img id="modal-image" src="" class="max-w-full max-h-[85vh] object-contain rounded">
        </div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- GLOBAL SETUP ---
            const teamMembers = [ 'Alcon Brian', 'Abdala Abril', 'Ratti Tomás', 'Gimenez Brian', 'Gozainy Joaquin', 'Cubilla Benjamín', 'Jesus Castellanos', 'Guillermo Paulosky', 'Joaquin Huaman'];
            
            function populateTeamCaratula(containerSelector) {
                const container = document.querySelector(containerSelector);
                if(container) {
                    container.innerHTML = teamMembers.map(name => `<span>${name}</span>`).join('<span class="hidden md:inline mx-2">•</span>');
                }
            }

            function populateTeamFinal(containerSelector) {
                const container = document.querySelector(containerSelector);
                if(container) {
                    container.innerHTML = teamMembers.map(name => `
                        <div class="bg-slate-50 border border-slate-200 rounded-lg p-4 flex items-center gap-4">
                            <i class="fas fa-user-circle text-5xl text-slate-400"></i>
                            <div class="flex-grow">
                                <h4 class="font-bold text-gray-800">${name}</h4>
                                <a href="#" class="text-blue-600 hover:text-blue-800 transition text-sm"><i class="fab fa-linkedin mr-1"></i>LinkedIn</a>
                            </div>
                            <div class="w-20 h-20 bg-slate-200 rounded-md flex items-center justify-center text-xs text-slate-500 text-center">
                                <!-- Reemplazar '...' con la URL de la imagen QR -->
                                <img src="https://placehold.co/80x80/e2e8f0/64748b?text=QR" alt="QR de ${name}" class="rounded-md">
                            </div>
                        </div>
                    `).join('');
                }
            }

            populateTeamCaratula('#equipo-caratula div');
            populateTeamFinal('#team-container-final');

            // --- PAGE NAVIGATION ---
            const pages = document.querySelectorAll('.page');
            document.querySelectorAll('.page-link').forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const targetId = e.currentTarget.dataset.target;
                    pages.forEach(page => page.classList.toggle('active', page.id === targetId));
                    window.scrollTo(0, 0);
                });
            });

            // --- PRESENTATION MODE ---
            function setupPresentationPage(pageElement) {
                const presentationModeBtn = pageElement.querySelector('.presentation-mode-btn');
                if (!presentationModeBtn) return;

                const playIcon = presentationModeBtn.querySelector('.play-icon');
                const stopIcon = presentationModeBtn.querySelector('.stop-icon');
                const fullscreenBtn = pageElement.querySelector('.fullscreen-btn');
                const presentationNavContainer = pageElement.querySelector('.presentation-nav-container');
                const presentationArrows = pageElement.querySelector('.presentation-arrows');
                const prevSlideBtn = pageElement.querySelector('.prev-slide-btn');
                const nextSlideBtn = pageElement.querySelector('.next-slide-btn');
                const slides = Array.from(pageElement.querySelectorAll('main > .slide'));
                
                let currentSlideIndex = 0;
                let isPresentationMode = false;

                function setupNavTree() {
                    const navTree = pageElement.querySelector('.presentation-nav-tree');
                    navTree.innerHTML = slides.map((slide, index) => `<a href="#" class="nav-item px-3 py-2" data-index="${index}">${slide.dataset.title}</a>`).join('');
                    navTree.querySelectorAll('.nav-item').forEach(item => item.addEventListener('click', e => { 
                        e.stopPropagation(); 
                        e.preventDefault(); 
                        goToSlide(parseInt(e.currentTarget.dataset.index)); 
                    }));
                }

                function goToSlide(index) {
                    if (index < 0 || index >= slides.length) return;
                    currentSlideIndex = index;
                    slides.forEach((slide, i) => slide.classList.toggle('active-slide', i === index));
                    updatePresentationUI();
                }

                function updatePresentationUI() {
                    const progress = ((currentSlideIndex + 1) / slides.length) * 100;
                    pageElement.querySelector('.presentation-progress-bar').style.width = `${progress}%`;
                    pageElement.querySelectorAll('.presentation-nav-tree .nav-item').forEach((item, i) => item.classList.toggle('active', i === currentSlideIndex));
                    if (prevSlideBtn) prevSlideBtn.disabled = currentSlideIndex === 0;
                    if (nextSlideBtn) nextSlideBtn.disabled = currentSlideIndex === slides.length - 1;
                }

                function togglePresentationMode() {
                    isPresentationMode = !isPresentationMode;
                    document.body.classList.toggle('presentation-mode', isPresentationMode);
                    playIcon.classList.toggle('hidden', isPresentationMode);
                    stopIcon.classList.toggle('hidden', !isPresentationMode);
                    presentationNavContainer.classList.toggle('hidden', !isPresentationMode);
                    if (presentationArrows) presentationArrows.classList.toggle('hidden', !isPresentationMode);
                    if (isPresentationMode) {
                        goToSlide(0);
                        if(document.documentElement.requestFullscreen) {
                            document.documentElement.requestFullscreen();
                        }
                    } else {
                        slides.forEach(s => s.classList.remove('active-slide'));
                         if (document.exitFullscreen) {
                            document.exitFullscreen();
                        }
                    }
                }

                presentationModeBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    togglePresentationMode();
                });

                if (prevSlideBtn) prevSlideBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    goToSlide(currentSlideIndex - 1)
                });
                if (nextSlideBtn) nextSlideBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    goToSlide(currentSlideIndex + 1)
                });
                
                slides.forEach(slide => {
                    slide.addEventListener('click', (e) => {
                        if (isPresentationMode && !e.target.closest('button, a, input, label, .clickable-image')) {
                             if (nextSlideBtn && !nextSlideBtn.disabled) nextSlideBtn.click();
                        }
                    });
                });

                fullscreenBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    if (document.fullscreenElement) {
                        document.exitFullscreen();
                    } else {
                        document.documentElement.requestFullscreen();
                    }
                });
                
                document.addEventListener('keydown', (e) => {
                    if (isPresentationMode && pageElement.classList.contains('active')) {
                        if (e.key === 'ArrowRight' && nextSlideBtn && !nextSlideBtn.disabled) nextSlideBtn.click();
                        if (e.key === 'ArrowLeft' && prevSlideBtn && !prevSlideBtn.disabled) prevSlideBtn.click();
                        if (e.key === 'Escape' || e.key === 'f') {
                            if (document.fullscreenElement) document.exitFullscreen();
                            if(isPresentationMode) togglePresentationMode();
                        }
                    }
                });
                
                setupNavTree();
            }
            
            document.querySelectorAll('.presentation-page').forEach(setupPresentationPage);

             // --- IMAGE MODAL ---
            const modalBackdrop = document.getElementById('image-modal-backdrop');
            const modalContent = document.getElementById('image-modal-content');
            const modalImage = document.getElementById('modal-image');
            document.querySelectorAll('.clickable-image').forEach(img => {
                img.addEventListener('click', (e) => {
                    e.stopPropagation(); // Prevent slide from advancing
                    modalImage.src = img.src;
                    modalBackdrop.classList.remove('hidden');
                    setTimeout(() => { modalBackdrop.classList.remove('opacity-0'); modalContent.classList.remove('opacity-0', 'scale-95'); }, 10);
                });
            });
            const closeModal = () => {
                modalContent.classList.add('opacity-0', 'scale-95');
                modalBackdrop.classList.add('opacity-0');
                setTimeout(() => modalBackdrop.classList.add('hidden'), 300);
            };
            document.getElementById('image-modal-close').addEventListener('click', closeModal);
            modalBackdrop.addEventListener('click', (e) => { if (e.target === modalBackdrop) closeModal(); });
            
            // --- SIMULATOR: TERMOFORMADORA ---
            const thermoPageSim = document.getElementById('page-thermo');
            if (thermoPageSim) {
                const productsData = {
                    bandeja: { name: "Bandeja Gastronómica", image: "https://acdn-us.mitiendanube.com/stores/002/955/098/products/bandeja-371-640-0-cad03da57e4ecbcfe816800876412099-1024-1024.jpg", cycleTime: 12, materialCost: 45, salePrice: 95, material: "PET 0.5mm", temp: 170 },
                    mascara: { name: "Máscara de Cotillón", image: "https://http2.mlstatic.com/D_Q_NP_874796-MLA90547858442_082025-O.webp", cycleTime: 14, materialCost: 55, salePrice: 280, material: "HIPS 0.8mm", temp: 180 },
                    blister: { name: "Blíster Industrial", image: "https://www.arapack.com/wp-content/uploads/2018/07/arapack-blister-autocierre-e1531559368209-768x282.jpg", cycleTime: 13, materialCost: 50, salePrice: 190, material: "PVC 0.6mm", temp: 160 }
                };
                const startBtn = thermoPageSim.querySelector('#start-simulation-btn');
                const resultDiv = thermoPageSim.querySelector('#simulation-result');
                if (startBtn) {
                    startBtn.addEventListener('click', (e) => {
                        e.stopPropagation(); // Prevent slide from advancing
                        const product = productsData[thermoPageSim.querySelector('input[name="product"]:checked').value];
                        startBtn.disabled = true; startBtn.textContent = 'Procesando...';
                        resultDiv.innerHTML = `<div class="w-full"><h4 id="simulation-status" class="font-bold mb-2">Iniciando ciclo...</h4><div class="w-full bg-slate-200 h-2 rounded-full overflow-hidden"><div id="progress-bar-sim" class="bg-blue-600 h-2" style="width:0; transition: width 0.1s linear;"></div></div><div id="final-result" class="opacity-0 transition-opacity duration-500 mt-4"></div></div>`;
                        const simStatus = resultDiv.querySelector('#simulation-status');
                        const simProgressBar = resultDiv.querySelector('#progress-bar-sim');
                        const finalResult = resultDiv.querySelector('#final-result');
                        let progress = 0;
                        const interval = setInterval(() => {
                            progress++;
                            simProgressBar.style.width = `${progress}%`;
                            if (progress >= 100) {
                                clearInterval(interval);
                                simStatus.innerHTML = `<span class="text-green-600 font-bold">¡Ciclo Completo!</span>`;
                                const hourlyProduction = Math.floor(3600 / product.cycleTime * 0.70); // 70% OEE
                                finalResult.innerHTML = `<img src="${product.image}" class="mx-auto h-20 my-4 object-contain"><div class="mb-4"><p class="text-sm text-gray-500">PRODUCCIÓN/HORA</p><p class="font-bold text-2xl">${hourlyProduction} u.</p></div><div class="text-xs text-left grid grid-cols-2 gap-x-4 gap-y-1"><span class="text-gray-500">Material:</span><span class="font-semibold text-right">${product.material}</span><span class="text-gray-500">Temp. Moldeo:</span><span class="font-semibold text-right">${product.temp}°C</span><span class="text-gray-500">Costo Mat. Prima:</span><span class="font-semibold text-right">$${product.materialCost}</span><span class="text-gray-500">Valor Venta:</span><span class="font-semibold text-right text-green-600">$${product.salePrice}</span></div><div class="mt-4 pt-4 border-t w-full"><p class="text-sm text-gray-500">MARGEN BRUTO</p><p class="font-bold text-3xl text-blue-600">$${product.salePrice - product.materialCost}</p></div>`;
                                finalResult.classList.remove('opacity-0');
                                startBtn.disabled = false; startBtn.textContent = 'Activar Otro Ciclo';
                            }
                        }, product.cycleTime * 1.5);
                    });
                }
            }


            // --- ANIMATION: TERMOFORMADORA ---
            const thermoPage = document.getElementById('page-thermo');
            if (thermoPage) {
                const animStartBtn = thermoPage.querySelector('#anim-start-thermo');
                const animResetBtn = thermoPage.querySelector('#anim-reset-thermo');
                const lamina = thermoPage.querySelector('#lamina-path');
                const calentador = thermoPage.querySelector('#calentador');
                const mold = thermoPage.querySelector('#mold');
                const texts = {
                    calentar: thermoPage.querySelector('#text-calentar'),
                    moldear: thermoPage.querySelector('#text-moldear'),
                    enfriar: thermoPage.querySelector('#text-enfriar'),
                    expulsar: thermoPage.querySelector('#text-expulsar')
                };
                
                const originalPath = "M 70 60 L 230 60 L 230 60 L 70 60 Z";
                const formedPath = "M 70 60 L 100 100 L 120 80 L 180 80 L 200 100 L 230 60 Z";

                const resetAnimation = () => {
                    lamina.setAttribute('d', originalPath);
                    lamina.style.transform = 'translateY(0px)';
                    calentador.style.transform = 'translateY(0px)';
                    mold.style.transform = 'translateY(0px)';
                    lamina.setAttribute('fill', '#3b82f6');
                    Object.values(texts).forEach(t => t.classList.remove('active'));
                    animStartBtn.disabled = false;
                };
                
                animStartBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    animStartBtn.disabled = true;
                    resetAnimation();
                    setTimeout(() => { texts.calentar.classList.add('active'); calentador.style.transform = 'translateY(35px)'; }, 500);
                    setTimeout(() => { lamina.setAttribute('fill', '#fb923c'); }, 1000);
                    setTimeout(() => { texts.calentar.classList.remove('active'); calentador.style.transform = 'translateY(0px)'; }, 2000);
                    setTimeout(() => { texts.moldear.classList.add('active'); mold.style.transform = 'translateY(-20px)'; }, 2500);
                    setTimeout(() => { lamina.setAttribute('d', formedPath); }, 2800);
                    setTimeout(() => { texts.moldear.classList.remove('active'); texts.enfriar.classList.add('active'); lamina.setAttribute('fill', '#3b82f6'); }, 3800);
                    setTimeout(() => { texts.enfriar.classList.remove('active'); mold.style.transform = 'translateY(0px)'; }, 4800);
                    setTimeout(() => { texts.expulsar.classList.add('active'); lamina.style.transform = 'translateY(-15px)'; }, 5300);
                    setTimeout(() => { resetAnimation(); }, 6300);
                });
                animResetBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    resetAnimation();
                });
            }

            // --- ANIMATION: ENVASADORA ---
            const envasadoraPage = document.getElementById('page-envasadora');
            if(envasadoraPage){
                const startBtn = envasadoraPage.querySelector('#anim-start-envasadora');
                const resetBtn = envasadoraPage.querySelector('#anim-reset-envasadora');
                const bottleGroup = envasadoraPage.querySelector('#bottle-group');
                const bottleFill = envasadoraPage.querySelector('#bottle-fill-level');
                const bottleCap = envasadoraPage.querySelector('#bottle-cap');
                const stopper1 = envasadoraPage.querySelector('#stopper1');
                const stopper2 = envasadoraPage.querySelector('#stopper2');
                const hopperGate = envasadoraPage.querySelector('#hopper-gate');
                const screwdriver = envasadoraPage.querySelector('#screwdriver');
                const texts = {
                    llenado: envasadoraPage.querySelector('#text-llenado'),
                    taponado: envasadoraPage.querySelector('#text-taponado'),
                    salida: envasadoraPage.querySelector('#text-salida')
                };

                const resetAnimation = () => {
                    bottleGroup.style.transition = 'none';
                    bottleGroup.style.transform = 'translateX(0)';
                    bottleFill.style.height = '0'; bottleFill.style.transform = 'translateY(0)'; bottleFill.style.opacity = '0';
                    bottleCap.style.opacity = '0';
                    [stopper1, stopper2, hopperGate, screwdriver].forEach(el => el.style.transform = 'translateY(0)');
                    Object.values(texts).forEach(t => t.classList.remove('active'));
                    startBtn.disabled = false;
                };

                startBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    startBtn.disabled = true;
                    resetAnimation();
                    setTimeout(() => { bottleGroup.style.transition = 'transform 2s linear'; bottleGroup.style.transform = 'translateX(100px)'; }, 100);
                    setTimeout(() => { stopper1.style.transform = 'translateY(-15px)'; texts.llenado.classList.add('active'); }, 2100);
                    setTimeout(() => { hopperGate.style.transform = 'translateY(10px)'; }, 2500);
                    setTimeout(() => { bottleFill.style.opacity = '1'; bottleFill.style.height = '30px'; bottleFill.style.transform = 'translateY(-30px)'; }, 2700);
                    setTimeout(() => { hopperGate.style.transform = 'translateY(0)'; }, 3300);
                    setTimeout(() => { stopper1.style.transform = 'translateY(0)'; texts.llenado.classList.remove('active'); }, 3700);
                    setTimeout(() => { bottleGroup.style.transform = 'translateX(215px)'; }, 4000);
                    setTimeout(() => { stopper2.style.transform = 'translateY(-15px)'; texts.taponado.classList.add('active'); }, 6000);
                    setTimeout(() => { bottleCap.style.opacity = '1'; }, 6400);
                    setTimeout(() => { screwdriver.style.transform = 'translateY(50px)'; }, 6800);
                    setTimeout(() => { screwdriver.style.transform = 'translateY(0)'; }, 7800);
                    setTimeout(() => { stopper2.style.transform = 'translateY(0)'; texts.taponado.classList.remove('active');}, 8200);
                    setTimeout(() => { texts.salida.classList.add('active'); bottleGroup.style.transform = 'translateX(350px)'; }, 8500);
                    setTimeout(() => { resetAnimation(); }, 10600);
                });
                resetBtn.addEventListener('click', (e) => {
                    e.stopPropagation();
                    resetAnimation();
                });
            }

            // --- GANTT CHART GENERATION ---
            function createGanttChart(containerId, tasks, startDate, endDate) {
                const container = document.getElementById(containerId);
                if (!container) return;

                const start = new Date(startDate);
                const end = new Date(endDate);
                const totalDays = (end - start) / (1000 * 60 * 60 * 24);
                
                const months = ['Jun', 'Jul', 'Ago', 'Sep', 'Oct'];
                let timelineHtml = '<div class="gantt-timeline col-span-2">';
                months.forEach(month => timelineHtml += `<div>${month} '25</div>`);
                timelineHtml += '</div>';

                let tasksHtml = tasks.map(task => {
                    const taskStart = new Date(task.start);
                    const taskDays = task.duration;
                    const offsetDays = (taskStart - start) / (1000 * 60 * 60 * 24);
                    
                    const left = (offsetDays / totalDays) * 100;
                    const width = (taskDays / totalDays) * 100;

                    return `
                        <div class="gantt-task-name">${task.name}</div>
                        <div class="gantt-bar-container">
                            <div class="gantt-bar ${task.status}" style="left: ${left}%; width: ${width}%;"></div>
                        </div>
                    `;
                }).join('');

                container.innerHTML = `<div class="gantt-container">${timelineHtml}${tasksHtml}</div>`;
            }

            const envasadoraTasks = [
                { name: 'A. Armar cinta', start: '2025-06-09', duration: 6, status: 'completed' },
                { name: 'B. Diseñar base', start: '2025-06-23', duration: 3, status: 'completed' },
                { name: 'C. Montar cilindros', start: '2025-07-02', duration: 3, status: 'in-progress' },
                { name: 'D. Mejorar tablero', start: '2025-07-14', duration: 6, status: 'completed' },
                { name: 'E. Amurar tablero', start: '2025-07-23', duration: 2, status: 'pending' },
                { name: 'F. Hacer programa', start: '2025-08-18', duration: 6, 'status': 'completed' },
                { name: 'G. Alimentar motor', start: '2025-09-01', duration: 1, status: 'pending' },
                { name: 'H. Vincular tablero', start: '2025-09-15', duration: 4, status: 'pending' }
            ];
            createGanttChart('gantt-envasadora', envasadoraTasks, '2025-06-01', '2025-10-31');

            const thermoTasks = [
                { name: 'T1. Diagnóstico', start: '2025-08-01', duration: 10, status: 'completed' },
                { name: 'T2. Diseño Eléctrico', start: '2025-08-15', duration: 5, status: 'completed' },
                { name: 'T3. Compra Componentes', start: '2025-08-22', duration: 7, status: 'in-progress' },
                { name: 'T4. Reparaciones Mecánicas', start: '2025-09-01', duration: 4, status: 'in-progress' },
                { name: 'T5. Reemplazo Componentes', start: '2025-09-05', duration: 3, status: 'pending' },
                { name: 'T6. Pintura Estructura', start: '2025-09-10', duration: 2, status: 'pending' },
                { name: 'T7. Montaje Final', start: '2025-09-12', duration: 5, status: 'pending' },
                { name: 'T8. Pruebas y Ajustes', start: '2025-09-19', duration: 3, status: 'pending' }
            ];
            createGanttChart('gantt-thermo', thermoTasks, '2025-08-01', '2025-10-31');

        });
    </script>
</body>
</html>


